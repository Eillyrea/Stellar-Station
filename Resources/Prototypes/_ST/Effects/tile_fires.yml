# SPDX-FileCopyrightText: 2026 AftrLite
#
# SPDX-License-Identifier: MIT

- type: entity
  id: StellarTileFire
  categories: [ ForkFiltered ]
  placement:
    mode: SnapgridCenter
  components:
  - type: Transform
    anchored: true
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        hard: false
        density: 150
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.5,0.5,0.5"
        layer:
        - MidImpassable
  - type: Clickable
  - type: SpriteFade
  - type: Sprite
    sprite: _ST/Effects/tile_fire.rsi
    offset: 0, 0.35
    noRot: true
    drawdepth: OverMobs
    layers:
    - map: [ "base" ]
      state: fire_0
      shader: unshaded
  - type: ESTileFire
  - type: ActiveEdgeSpreader
  - type: EdgeSpreader
    id: ESTileFire
  - type: SpeedModifierContacts
    walkSpeedModifier: 0.8
    sprintSpeedModifier: 0.8
  - type: Flammable
    firestacksOnIgnite: 0.0
    firestackFade: 0.32
    onFire: true
    fireStacks: 3
    minimumFireStacks: 0
    maximumFireStacks: 15
    fireSpread: true
    # max 15 firestacks -> stage 3
    firestackVisualDivisor: 5
    deleteOnExtinguish: true
    basicFireSpread: true
  - type: Temperature
    currentTemperature: 423.15
  - type: AtmosExposed
  - type: Reactive
    groups:
      Extinguish: [ Touch ]
  - type: AmbientSound
    range: 3
    sound:
      path: /Audio/_ES/Ambience/Objects/fire1.ogg
    netsync: false
  - type: Appearance
  - type: TileEmission
    color: "#fc9003"
  - type: ESGenericAmbienceVisualizer
    sounds:
      enum.FireVisuals.FireStacks:
        0: { sound: /Audio/_ES/Ambience/Objects/fire1.ogg }
        1: { sound: /Audio/_ES/Ambience/Objects/fire2.ogg }
        2: { sound: /Audio/_ES/Ambience/Objects/fire3.ogg }
        3: { sound: /Audio/_ES/Ambience/Objects/fire4.ogg }
  - type: GenericVisualizer
    visuals:
      enum.FireVisuals.FireStacks:
        base:
          0: { state: fire_0 }
          1: { state: fire_1 }
          2: { state: fire_2 }
          3: { state: fire_3 }
  - type: Tag
    tags:
    - HideContextMenu

- type: entity
  id: StellarTileFireStage2
  parent: StellarTileFire
  suffix: Stage 2
  components:
  - type: Flammable
    fireStacks: 7

- type: entity
  id: StellarTileFireStage3
  parent: StellarTileFire
  suffix: Stage 3
  components:
  - type: Flammable
    fireStacks: 11

- type: entity
  id: StellarTileFireStage4
  parent: StellarTileFire
  suffix: Stage 4
  components:
  - type: Flammable
    fireStacks: 15
